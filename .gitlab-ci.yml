stages:
    - ansible

.ansible_template: &ansible_template
    stage: ansible
    script:
        - ansible-playbook demo3/$PLAYBOOK
    when: manual
    
conteiner-opimized:
    <<: *ansible_template
    variables:
        PLAYBOOK: create_conteiner-opt.yml
    only:
        changes:
            - demo3/create_conteiner-opt.yml

network:
    <<: *ansible_template
    variables:
        PLAYBOOK: network.yml
    only:
        changes:
            - demo3/network.yml
            
cloud-sql:
    <<: *ansible_template
    variables:
        PLAYBOOK: cloudsql.yml
    only:
        changes:
            - demo3/cloudsql.yml          

load-balancer:
    <<: *ansible_template
    variables:
        PLAYBOOK: loadbalancer.yml
    only:
        changes:
            - demo3/loadbalancer.yml  

pingdom:
    <<: *ansible_template
    variables:
        PLAYBOOK: pingdom.yml
    only:
        changes:
            - demo3/pingdom.yml  
